var booked_load_calendar_date_booking_options,booked_appt_form_options,bookedNewAppointment;function create_booked_modal(){var e=jQuery(window).height();if(jQuery(window).width()>720)var t=e-295;else t=e;jQuery("body input, body textarea, body select").blur(),jQuery("body").addClass("booked-noScroll"),jQuery('<div class="booked-modal bm-loading"><div class="bm-overlay"></div><div class="bm-window"><div style="height:100px"></div></div></div>').appendTo("body"),jQuery(".booked-modal .bm-overlay").spin("booked_white"),jQuery(".booked-modal .bm-window").css({"max-height":t+"px"})}!function(e,t,o,a){var n=e(t);function i(){e("table.booked-calendar").find("tr.week").each(function(){0==e(this).children().length&&e(this).remove()})}function r(t,o){if(t=void 0===t||t,o=void 0!==o&&o)var a=o.find("li.active .savingState, .topSavingState.savingState, .calendarSavingState"),n=o.find(".monthName"),i=o.find("table.booked-calendar tbody");else a=e("li.active .savingState, .topSavingState.savingState, .calendarSavingState"),n=e(".monthName"),i=e("table.booked-calendar tbody");t?(a.fadeIn(200),n.hide(),i.animate({opacity:.2},100)):(a.hide(),n.show(),i.animate({opacity:1},0))}function s(){e(".booked_list_date_picker").each(function(){var t=e(this),a=t.parents(".booked-appt-list").attr("data-min-date"),n=t.parents(".booked-appt-list").attr("data-max-date");if(void 0===a)a=t.attr("data-min-date");t.datepicker({dateFormat:"yy-mm-dd",minDate:a,maxDate:n,showAnim:!1,beforeShow:function(t,o){e("#ui-datepicker-div").removeClass(),e("#ui-datepicker-div").addClass("booked_custom_date_picker")},onClose:function(t){e(".booked_list_date_picker_trigger").removeClass("booked-dp-active")},onSelect:function(t){var a=e(this),n=t,i=a.parents(".booked-list-view"),r=i.attr("data-default"),d=a.parents(".booked-list-view-nav").attr("data-calendar-id");void 0===r&&(r=!1),d||(d=0),i.addClass("booked-loading");var l={action:"booked_appointment_list_date",date:n,calendar_id:d,force_default:r};return e(o).trigger("booked-before-loading-appointment-list-booking-options"),i.spin("booked_top"),e.ajax({url:booked_js_vars.ajax_url,type:"post",data:l,success:function(e){i.html(e),s(),setTimeout(function(){i.removeClass("booked-loading")},1)}}),!1}})}),e("body").on("click",".booked_list_date_picker_trigger",function(t){t.preventDefault(),e(this).hasClass("booked-dp-active")||(e(this).addClass("booked-dp-active"),e(this).parents(".booked-appt-list").find(".booked_list_date_picker").datepicker("show"))})}e.fn.spin.presets.booked={lines:10,length:7,width:5,radius:11,corners:1,rotate:0,direction:1,color:"#555",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"booked-spinner",zIndex:2e9,top:"50%",left:"50%"},e.fn.spin.presets.booked_top={lines:11,length:10,width:6,radius:15,corners:1,rotate:0,scale:.5,direction:1,color:"#aaaaaa",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"booked-spinner booked-spinner-top",zIndex:2e9,top:"15px",left:"50%"},e.fn.spin.presets.booked_white={lines:13,length:11,width:5,radius:18,scale:1,corners:1,rotate:0,direction:1,color:"#fff",speed:1,trail:60,shadow:!1,hwaccel:!1,className:"booked-spinner booked-white",zIndex:2e9,top:"50%",left:"50%"},n.on("resize",function(){adjust_calendar_boxes(),resize_booked_modal()}),n.on("load",function(){d.Init();adjust_calendar_boxes(),e(".booked-calendar-wrap").each(function(){var t=e(this),o=t.find("table.booked-calendar").attr("data-calendar-date");t.attr("data-default",o),init_tooltips(t)}),e(".booked-list-view").each(function(){var t=e(this),o=t.find(".booked-appt-list").attr("data-list-date");t.attr("data-default",o)}),i(),s(),e(".booked_calendar_chooser").change(function(a){a.preventDefault();var n=e(this);if(n.parents(".booked-calendarSwitcher").hasClass("calendar")){void 0===(l=(d=n.parents(".booked-calendar-shortcode-wrap").find(".booked-calendar-wrap")).attr("data-default"))&&(l=!1);p={action:"booked_calendar_month",gotoMonth:l,calendar_id:n.val()};r(!0,d),e.ajax({url:booked_js_vars.ajax_url,type:"post",data:p,success:function(o){d.html(o),adjust_calendar_boxes(),i(),init_tooltips(d),e(t).trigger("booked-load-calendar",p,n)}})}else{var d,l=(d=n.parents(".booked-calendar-shortcode-wrap").find(".booked-list-view")).attr("data-default");n.parents(".booked-calendarSwitcher").hasClass("calendar");void 0===l&&(l=!1),d.addClass("booked-loading");var p={action:"booked_appointment_list_date",date:l,calendar_id:n.val()};e(o).trigger("booked-before-loading-appointment-list-booking-options"),d.spin("booked_top"),e.ajax({url:booked_js_vars.ajax_url,type:"post",data:p,success:function(e){d.html(e),s(),setTimeout(function(){d.removeClass("booked-loading")},1)}})}return!1}),e(".booked-calendar-wrap").on("click",".page-right, .page-left, .monthName a",function(o){o.preventDefault();var a=e(this),n=a.attr("data-goto"),s=a.parents(".booked-calendar-wrap"),d=s.attr("data-default"),l=a.parents("table.booked-calendar").attr("data-calendar-id");void 0===d&&(d=!1);var p={action:"booked_calendar_month",gotoMonth:n,calendar_id:l,force_default:d};return r(!0,s),e.ajax({url:booked_js_vars.ajax_url,type:"post",data:p,success:function(o){s.html(o),adjust_calendar_boxes(),i(),init_tooltips(s),e(t).trigger("booked-load-calendar",p,a)}}),!1}),e(".booked-calendar-wrap").on("click","tr.week td",function(t){t.preventDefault();var a=e(this),n=a.parents("table.booked-calendar"),i=a.parent(),r=a.attr("data-date"),s=n.attr("data-calendar-id"),d=i.find("td").length;if(s||(s=0),a.hasClass("blur")||a.hasClass("booked")&&!booked_js_vars.publicAppointments||a.hasClass("prev-date"));else if(a.hasClass("active")){a.removeClass("active"),e("tr.entryBlock").remove();var l=n.height();n.parent().height(l)}else{e("tr.week td").removeClass("active"),a.addClass("active"),e("tr.entryBlock").remove(),i.after('<tr class="entryBlock booked-loading"><td colspan="'+d+'"></td></tr>'),e("tr.entryBlock").find("td").spin("booked"),booked_load_calendar_date_booking_options={action:"booked_calendar_date",date:r,calendar_id:s},e(o).trigger("booked-before-loading-calendar-booking-options");l=n.height();n.parent().height(l),e.ajax({url:booked_js_vars.ajax_url,type:"post",data:booked_load_calendar_date_booking_options,success:function(t){e("tr.entryBlock").find("td").html(t),e("tr.entryBlock").removeClass("booked-loading"),e("tr.entryBlock").find(".booked-appt-list").fadeIn(300),e("tr.entryBlock").find(".booked-appt-list").addClass("shown"),adjust_calendar_boxes()}})}}),e(".booked-list-view").on("click",".booked-list-view-date-prev,.booked-list-view-date-next",function(t){t.preventDefault();var a=e(this),n=a.attr("data-date"),i=a.parents(".booked-list-view"),r=i.attr("data-default"),d=a.parents(".booked-list-view-nav").attr("data-calendar-id");void 0===r&&(r=!1),d||(d=0),i.addClass("booked-loading");var l={action:"booked_appointment_list_date",date:n,calendar_id:d,force_default:r};return e(o).trigger("booked-before-loading-appointment-list-booking-options"),i.spin("booked_top"),e.ajax({url:booked_js_vars.ajax_url,type:"post",data:l,success:function(e){i.html(e),s(),setTimeout(function(){i.removeClass("booked-loading")},1)}}),!1}),bookedNewAppointment=function(t){t.preventDefault();var a=e(this),n=a.attr("data-title"),i=a.attr("data-timeslot"),r=a.attr("data-date"),s=a.attr("data-calendar-id"),d=(a.parents(".timeslot"),a.parents(".booked-calendar-wrap").hasClass("booked-list-view"));if(void 0!==d&&d)var l=a.parents(".booked-list-view").find(".booked-list-view-nav").attr("data-calendar-id");else l=a.parents("table.booked-calendar").attr("data-calendar-id");return booked_appt_form_options={action:"booked_new_appointment_form",date:r,timeslot:i,calendar_id:s=l||s,title:n},e(o).trigger("booked-before-loading-booking-form"),create_booked_modal(),setTimeout(function(){e.ajax({url:booked_js_vars.ajax_url,type:"post",data:booked_appt_form_options,success:function(t){e(".bm-window").html(t);var a=e(".booked-modal"),n=a.find(".bm-window");n.css({visibility:"hidden"}),a.removeClass("bm-loading"),e(o).trigger("booked-on-new-app"),resize_booked_modal(),n.hide(),e(".booked-modal .bm-overlay").find(".booked-spinner").remove(),setTimeout(function(){n.css({visibility:"visible"}),n.show()},50)}})},100),!1},e(".booked-calendar-wrap").on("click","button.new-appt",bookedNewAppointment);var a=e(".booked-tabs");if(a.find("li.active").length||a.find("li:first-child").addClass("active"),a.length){e(".booked-tab-content").hide();var n=a.find(".active > a").attr("href");n=(n=n.split("#"))[1],e("#profile-"+n).show(),a.find("li > a").on("click",function(t){t.preventDefault(),e(".booked-tab-content").hide(),a.find("li").removeClass("active"),e(this).parent().addClass("active");var o=e(this).attr("href");return o=(o=o.split("#"))[1],e("#profile-"+o).show(),!1})}e(".booked-profile-appt-list").on("click",".booked-show-cf",function(t){t.preventDefault();var o=e(this).parent().find(".cf-meta-values-hidden");return o.is(":visible")?(o.hide(),e(this).removeClass("booked-cf-active")):(o.show(),e(this).addClass("booked-cf-active")),!1}),e("#loginform").length&&e('#loginform input[type="submit"]').on("click",function(t){e('#loginform input[name="log"]').val()&&e('#loginform input[name="pwd"]').val()?e("#loginform .booked-custom-error").hide():e("#loginform").parents(".booked-form-wrap").length&&(t.preventDefault(),e("#loginform").parents(".booked-form-wrap").find(".booked-custom-error").fadeOut(200).fadeIn(200))}),e("#profile-forgot").length&&e('#profile-forgot input[type="submit"]').on("click",function(t){e('#profile-forgot input[name="user_login"]').val()?e("#profile-forgot .booked-custom-error").hide():(t.preventDefault(),e("#profile-forgot").find(".booked-custom-error").fadeOut(200).fadeIn(200))}),e(".booked-upload-wrap").length&&e(".booked-upload-wrap input[type=file]").on("change",function(){var t=e(this).val();e(this).parent().find("span").html(t),e(this).parent().addClass("hasFile")}),e(".booked-profile-appt-list").on("click",".appt-block .cancel",function(t){t.preventDefault();var o=e(this).parents(".appt-block"),a=o.attr("data-appt-id");if(confirm_delete=confirm(booked_js_vars.i18n_confirm_appt_delete),1==confirm_delete){var n=parseInt(e(".booked-profile-appt-list").find("h4").find("span.count").html());(n=parseInt(n-1))<1?(e(".booked-profile-appt-list").find("h4").find("span.count").html("0"),e(".no-appts-message").slideDown("fast")):e(".booked-profile-appt-list").find("h4").find("span.count").html(n),e(".appt-block").animate({opacity:.4},0),o.slideUp("fast",function(){e(this).remove()}),e.ajax({url:booked_js_vars.ajax_url,method:"post",data:{action:"booked_cancel_appt",appt_id:a},success:function(t){e(".appt-block").animate({opacity:1},150)}})}return!1}),e("body").on("touchstart click",".bm-overlay, .bm-window .close, .booked-form .cancel",function(e){return e.preventDefault(),close_booked_modal(),!1}),e("body").on("focusin",".booked-form input",function(){this.title==this.value&&(e(this).addClass("hasContent"),this.value="")}).on("focusout",".booked-form input",function(){""===this.value&&(e(this).removeClass("hasContent"),this.value=this.title)}),e("body").on("change",".booked-form input",function(){var t=e(this).attr("data-condition"),o=e(this).val();t&&e(".condition-block").length&&(e(".condition-block."+t).hide(),e("#condition-"+o).fadeIn(200),resize_booked_modal())}),e("body").on("submit","form#ajaxlogin",function(o){o.preventDefault(),e("form#ajaxlogin p.status").show().html('<i class="booked-icon booked-icon-spinner-clock booked-icon-spin"></i>&nbsp;&nbsp;&nbsp;'+booked_js_vars.i18n_please_wait),resize_booked_modal();var a=e(this),n=a.data("date"),i=a.data("title"),r=a.data("timeslot"),s=a.data("calendar-id");e.ajax({type:"post",url:booked_js_vars.ajax_url,data:e("form#ajaxlogin").serialize(),success:function(o){if("success"==o){close_booked_modal();var a=e('<button data-title="'+i+'" data-timeslot="'+r+'" data-date="'+n+'" data-calendar-id="'+s+'"></button>');a.on("click",t.bookedNewAppointment),a.triggerHandler("click"),a.unbind("click",t.bookedNewAppointment),a.detach()}else e("form#ajaxlogin p.status").show().html('<i class="booked-icon booked-icon-alert" style="color:#E35656"></i>&nbsp;&nbsp;&nbsp;'+booked_js_vars.i18n_wrong_username_pass),resize_booked_modal()}}),o.preventDefault()}),e("body").on("click",".booked-forgot-password",function(t){t.preventDefault(),e("#ajaxlogin").hide(),e("#ajaxforgot").show(),resize_booked_modal()}),e("body").on("click",".booked-forgot-goback",function(t){t.preventDefault(),e("#ajaxlogin").show(),e("#ajaxforgot").hide(),resize_booked_modal()}),e("body").on("submit","form#ajaxforgot",function(t){t.preventDefault(),e("form#ajaxforgot p.status").show().html('<i class="booked-icon booked-icon-spinner-clock booked-icon-spin"></i>&nbsp;&nbsp;&nbsp;'+booked_js_vars.i18n_please_wait),resize_booked_modal();e(this);e.ajax({type:"post",url:booked_js_vars.ajax_url,data:e("form#ajaxforgot").serialize(),success:function(o){"success"==o?(t.preventDefault(),e("#ajaxlogin").show(),e("#ajaxforgot").hide(),e("form#ajaxlogin p.status").show().html('<i class="booked-icon booked-icon-check" style="color:#56c477"></i>&nbsp;&nbsp;&nbsp;'+booked_js_vars.i18n_password_reset),resize_booked_modal()):(e("form#ajaxforgot p.status").show().html('<i class="booked-icon booked-icon-alert" style="color:#E35656"></i>&nbsp;&nbsp;&nbsp;'+booked_js_vars.i18n_password_reset_error),resize_booked_modal())}}),t.preventDefault()}),e("body").on("click",".booked-form input#submit-request-appointment",function(t){e("form#newAppointmentForm p.status").show().html('<i class="booked-icon booked-icon-spinner-clock booked-icon-spin"></i>&nbsp;&nbsp;&nbsp;'+booked_js_vars.i18n_please_wait),resize_booked_modal(),t.preventDefault();var o=e("#newAppointmentForm input[name=customer_type]").val(),a=e("#newAppointmentForm input[name=user_id]").val(),n=e("#newAppointmentForm input[name=booked_appt_name]").val(),i=e("#newAppointmentForm input[name=booked_appt_surname]").val(),r=e("#newAppointmentForm input[name=booked_appt_surname]").length,s=e("#newAppointmentForm input[name=guest_name]").val(),d=e("#newAppointmentForm input[name=guest_surname]").val(),p=e("#newAppointmentForm input[name=guest_surname]").length,c=e("#newAppointmentForm input[name=guest_email]").val(),u=e("#newAppointmentForm input[name=guest_email]").length,b=e("#newAppointmentForm input[name=booked_appt_email]").val(),_=e("#newAppointmentForm input[name=booked_appt_password]").val(),m=!1;return e(this).parents(".booked-form").find("input,textarea,select").each(function(t,o){var a=e(this).attr("required");if(a&&"hidden"==e(o).attr("type")){var n=e(o).attr("name");if(n=n.split("---"),fieldName=n[0],fieldNumber=n[1].split("___"),fieldNumber=fieldNumber[0],"radio-buttons-label"==fieldName){var i=!1;e('input:radio[name="single-radio-button---'+fieldNumber+'[]"]:checked').each(function(){e(this).val()&&(i=e(this).val())}),i||(m=!0)}else if("checkboxes-label"==fieldName){var r=!1;e('input:checkbox[name="single-checkbox---'+fieldNumber+'[]"]:checked').each(function(){e(this).val()&&(r=e(this).val())}),r||(m=!0)}}else a&&"hidden"!=e(o).attr("type")&&""==e(o).val()&&(m=!0)}),m?(e("form#newAppointmentForm p.status").show().html('<i class="booked-icon booked-icon-alert" style="color:#E35656"></i>&nbsp;&nbsp;&nbsp;'+booked_js_vars.i18n_fill_out_required_fields),resize_booked_modal(),!1):"new"==o&&!n||"new"==o&&r&&!i||"new"==o&&!b||"new"==o&&!_?(e("form#newAppointmentForm p.status").show().html('<i class="booked-icon booked-icon-alert" style="color:#E35656"></i>&nbsp;&nbsp;&nbsp;'+booked_js_vars.i18n_appt_required_fields),resize_booked_modal(),!1):"guest"==o&&!s||"guest"==o&&u&&!c||"guest"==o&&p&&!d?(e("form#newAppointmentForm p.status").show().html('<i class="booked-icon booked-icon-alert" style="color:#E35656"></i>&nbsp;&nbsp;&nbsp;'+booked_js_vars.i18n_appt_required_fields_guest),resize_booked_modal(),!1):(("current"==o&&a||"guest"==o&&s&&!p&&!u||"guest"==o&&s&&p&&d&&!u||"guest"==o&&s&&u&&c&&!p||"guest"==o&&s&&u&&c&&p&&d)&&l.currentUserOrGuest(),void("new"==o&&n&&b&&_&&(!r||r&&i)&&l.newUser()))});var l={formSelector:"#newAppointmentForm",formBtnRequestSelector:".booked-form input#submit-request-appointment",formStatusSelector:"p.status",formSubmitBtnSelector:"#submit-request-appointment",apptContainerSelector:".booked-appointment-details",baseFields:["guest_name","guest_surname","guest_email","action","customer_type","user_id"],apptFields:["appoinment","calendar_id","title","date","timestamp","timeslot"],userFields:["booked_appt_name","booked_appt_surname","booked_appt_email","booked_appt_password"],captchaFields:["captcha_word","captcha_code"],currentApptIndex:!1,currentApptCounter:!1,hasAnyErrors:!1,currentUserOrGuest:function(){var e=l._totalAppts();if(e){l._showLoadingMessage(),l._resetDefaultValues();var t=l._getBaseData();l.currentApptIndex=0,l.currentApptCounter=1,l._doRequestAppointment(t,e)}},newUser:function(){var t=l._totalAppts();if(t){l._showLoadingMessage(),l._resetDefaultValues();var o=l._getBaseData();if(t>1){var a=null;a=e.extend(!0,{},o),a=l._addUserRegistrationData(a),l._requestUserRegistration(a),o.customer_type="current"}else o=l._addUserRegistrationData(o);l.currentApptIndex=0,l._doRequestAppointment(o,t)}},_doRequestAppointment:function(t,o){var a=l.apptFields;0===l.currentApptIndex&&(l._hideCancelBtn(),l._disableSubmitBtn(),l.hasAnyErrors=!1);for(var n=e.extend(!0,{},t),i=0;i<a.length;i++)n[a[i]]=l._getFieldVal(a[i],l.currentApptIndex);var r=l._getFieldVal("calendar_id",l.currentApptIndex);n=l._addCustomFieldsData(n,r),l._getApptElement(l.currentApptIndex).hasClass("skip")?(l.currentApptIndex++,l.currentApptCounter++,l._doRequestAppointment(t,o,l.currentApptIndex)):e.ajax({type:"post",url:booked_js_vars.ajax_url,data:n,success:function(e){l._requestAppointmentResponseHandler(e),l.currentApptIndex++,setTimeout(function(){l.currentApptCounter===o?l.hasAnyErrors?(l._enableSubmitBtn(),l._showCancelBtn()):l._onAfterRequestAppointment():(l.currentApptCounter++,l._doRequestAppointment(t,o))},100)}})},_totalAppts:function(){return e(l.formSelector+' input[name="appoinment[]"]').length},_getBaseData:function(){for(var e={},t=l.baseFields,o=0;o<t.length;o++)e[t[o]]=l._getFieldVal(t[o]);return e.is_fe_form=!0,e.total_appts=l._totalAppts(),e},_getFieldVal:function(t,o){t=void 0===t?"":t,o=void 0!==o&&o;var a=l.formSelector+" ";return!1===o?e(a+=" [name="+t+"]").val():e(a+=' [name="'+t+'[]"]').eq(o).val()},_resetDefaultValues:function(){e(".booked-form input").each(function(){var t=e(this).val();e(this).attr("title")==t&&e(this).val("")})},_resetToDefaultValues:function(){e(".booked-form input").each(function(){var t=e(this).val(),o=e(this).attr("title");t||e(this).val(o)})},_addUserRegistrationData:function(t){return e.each(l.userFields,function(e,o){t[o]=l._getFieldVal(o)}),e.each(l.captchaFields,function(e,o){var a=l._getFieldVal(o);a&&(t[o]=a)}),t},_addCustomFieldsData:function(t,o){e(".cf-block [name]").filter(function(t){var a=e(this);return parseInt(a.data("calendar-id"))===parseInt(o)&&a.attr("name").match(/---\d+/g)}).each(function(o){var a=e(this),n=a.attr("name"),i=a.val();a.attr("type");i&&(n.match(/checkbox|radio+/g)?n.match(/radio+/g)&&a.is(":checked")?t[n]=i:((!n.match(/radio+/g)&&void 0===t[n]||!n.match(/radio+/g)&&t[n].constructor!==Array)&&(t[n]=[]),a.is(":checked")&&t[n].push(i)):t[n]=i)});return t},_requestUserRegistration:function(t,o){e.ajax({type:"post",url:booked_js_vars.ajax_url,data:t,async:!1,success:function(e){l._requestUserRegistrationResponseHandler(e)}})},_requestUserRegistrationResponseHandler:function(e){var t=e.split("###");t[0].substr(t[0].length-5)},_requestAppointment:function(e){l._requestAppointmentResponseHandler(e)},_requestAppointmentResponseHandler:function(e){var t=e.split("###");"error"!==t[0].substr(t[0].length-5)?l._requestAppointmentOnSuccess(t):l._requestAppointmentOnError(t)},_requestAppointmentOnError:function(t){var a=l._getApptElement();e(o).trigger("booked-on-requested-appt-error",[a]),l._highlightAppt(),l._setStatusMsg(t[1]),l.hasAnyErrors=!0,resize_booked_modal()},_requestAppointmentOnSuccess:function(t){var a=l._getApptElement();e(o).trigger("booked-on-requested-appt-success",[a]),l._unhighlightAppt()},_onAfterRequestAppointment:function(){var a={redirect:!1};e(o).trigger("booked-on-requested-appointment",[a]);a.redirect||(booked_js_vars.profilePage?t.location=booked_js_vars.profilePage:(l._reloadApptsList(),l._reloadCalendarTable()))},_setStatusMsg:function(t){var o=l.formSelector+" "+l.formStatusSelector;e(o).show().html('<i class="booked-icon booked-icon-alert" style="color:#E35656"></i>&nbsp;&nbsp;&nbsp;'+t)},_getApptElement:function(t){t=void 0===t?l.currentApptIndex:t;var o=l.formSelector+" "+l.apptContainerSelector;return e(o).eq(t)},_highlightAppt:function(e){var t=l._getApptElement();t.length&&t.addClass("has-error")},_unhighlightAppt:function(e){var t=l._getApptElement();t.length&&t.removeClass("has-error").addClass("skip")},_enableSubmitBtn:function(){var t=l.formSelector+" "+l.formSubmitBtnSelector;e(t).attr("disabled",!1)},_disableSubmitBtn:function(){var t=l.formSelector+" "+l.formSubmitBtnSelector;e(t).attr("disabled",!0)},_showCancelBtn:function(){e(l.formSelector).find("button.cancel").show()},_hideCancelBtn:function(){e(l.formSelector).find("button.cancel").hide()},_showLoadingMessage:function(){e("form#newAppointmentForm p.status").show().html('<i class="booked-icon booked-icon-spinner-clock booked-icon-spin"></i>&nbsp;&nbsp;&nbsp;'+booked_js_vars.i18n_please_wait)},_reloadApptsList:function(){e(".booked-appt-list").length&&e(".booked-appt-list").each(function(){var t=e(this),a=t.attr("data-list-date"),n=t.parents(".booked-list-view"),i=n.attr("data-default"),r=parseInt(t.find(".booked-list-view-nav").attr("data-calendar-id"))||0;i=void 0!==i&&i,r=r||0,n.addClass("booked-loading");var d={action:"booked_appointment_list_date",date:a,calendar_id:r,force_default:i};e(o).trigger("booked-before-loading-appointment-list-booking-options"),n.spin("booked_top"),e.ajax({url:booked_js_vars.ajax_url,type:"post",data:d,success:function(e){n.html(e),close_booked_modal(),s(),setTimeout(function(){n.removeClass("booked-loading")},1)}})})},_reloadCalendarTable:function(){if(e("td.active").length){var t=e("td.active"),a=t.attr("data-date"),n=parseInt(t.parents("table").data("calendar-id"))||0;booked_load_calendar_date_booking_options={action:"booked_calendar_date",date:a,calendar_id:n},e(o).trigger("booked-before-loading-calendar-booking-options"),e.ajax({url:booked_js_vars.ajax_url,type:"post",data:booked_load_calendar_date_booking_options,success:function(t){e("tr.entryBlock").find("td").html(t),close_booked_modal(),e("tr.entryBlock").removeClass("booked-loading"),e("tr.entryBlock").find(".booked-appt-list").hide().fadeIn(300),e("tr.entryBlock").find(".booked-appt-list").addClass("shown"),adjust_calendar_boxes()}})}}}}),e(o).ajaxStop(function(){r(!1)});var d={bookingModalSelector:".booked-modal",tabSelector:".booked-tabs",tabNavSelector:".booked-tabs-nav span",tabCntSelector:".booked-tabs-cnt",Init:function(){e(o).on("click",this.tabNavSelector,this.tabsNav)},tabsNav:function(t){t.preventDefault(),d.switchToTab(e(this)),d.maybeResizeBookingModal()},switchToTab:function(e){var t=e,o="."+t.data("tab-cnt"),a=t.parents(d.tabSelector);t.addClass("active").siblings().removeClass("active"),a.find(d.tabCntSelector+" "+o).addClass("active").siblings().removeClass("active")},maybeResizeBookingModal:function(){e(d.bookingModalSelector).length&&resize_booked_modal()}}}(jQuery,window,document);var previousRealModalHeight=100;function resize_booked_modal(){var e=jQuery(window).height(),t=jQuery(window).width();if(jQuery(".booked-modal .bm-window .booked-scrollable").length)(o=jQuery(".booked-modal .bm-window .booked-scrollable")[0].scrollHeight)<100?o=previousRealModalHeight:previousRealModalHeight=o;else var o=0;var a,n,i=o-43;if(i=e<o+43+43?e-43-43:o,t>720){n=(a=i-25)-15;var r=(a+78)/2}else{n=(a=e-43)-60;r=a/2}jQuery(".booked-modal").css({"margin-top":"-"+r+"px"}),jQuery(".booked-modal .bm-window").css({"max-height":a+"px"}),jQuery(".booked-modal .bm-window .booked-scrollable").css({"max-height":n+"px"})}function close_booked_modal(){var e=jQuery(".booked-modal");e.fadeOut(200),e.addClass("bm-closing"),jQuery("body").removeClass("booked-noScroll"),setTimeout(function(){e.remove()},300)}function init_tooltips(e){jQuery(".tooltipster").tooltipster({theme:"tooltipster-light",animation:"grow",speed:200,delay:50,offsetY:-15})}function adjust_calendar_boxes(){jQuery(".booked-calendar").each(function(){var e=jQuery(window).width(),t=jQuery(this).parents(".booked-calendar-wrap").hasClass("small"),o=jQuery(this).find("tbody tr.week td").width(),a=jQuery(this).height();boxesHeight=1*o,jQuery(this).find("tbody tr.week td").height(boxesHeight),jQuery(this).find("tbody tr.week td .date").css("line-height",boxesHeight+"px"),jQuery(this).find("tbody tr.week td .date .number").css("line-height",boxesHeight+"px"),t||e<720?jQuery(this).find("tbody tr.week td .date .number").css("line-height",boxesHeight+"px"):jQuery(this).find("tbody tr.week td .date .number").css("line-height","");a=jQuery(this).height();jQuery(this).parent().height(a)})}